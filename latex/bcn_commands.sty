% ~~~~~~~~~~~~~~~~~~~~~~~~~~ BCN_COMMANDS ~~~~~~~~~~~~~~~~~~~~~~~~~~ 
% bcn:              bijan@chokoufe.com
% Recent versions:  https://github.com/bijanc/bcn_scripts
% Last Change:      2013 Mar 27
%
% Put me in:
%   for Unix/Linux with Texlive vanilla setup:
%     /usr/local/texlive/texmf-local/tex/latex/local
%     then run 'texhash'
%   for Windows with MikTex
%     C:\Program Files\MiKTeX 2.9\tex\latex\bijan\
%     then go to MikTex Options -> Refresh FNDB, Update Formats
% 
% Some commands and shorthands

\NeedsTeXFormat{LaTeX2e} 
\ProvidesPackage{bcn_commands} 

% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 

\newcommand{\lectureof}[1]
  {\begin{center}\textbf{\color{red}Lecture on #1 starts here.}\end{center}}

% ~~~~~~~~~~~~~~~~~~~~~~~~~~ MATH ~~~~~~~~~~~~~~~~~~~~~~~~~~ 

\DeclareMathOperator{\asinh}{asinh}
\DeclareMathOperator{\acosh}{acosh}
\DeclareMathOperator{\atanh}{atanh}
\DeclareMathOperator{\li}   {Li}
\DeclareMathOperator{\tr}   {Tr}
\DeclareMathOperator{\sech}{sech}
\DeclareMathOperator{\sgn}{sgn}

\newcommand\scalprod[2] {\ems{ \,#1\hspace{-.1em}\cdot\hspace{-.1em}#2\, }}
\newcommand\pder[3][]   {\ems{ \frac{\del^{#1} #2}{\del #3^{#1}} }}
\newcommand\tder[2]     {\ems{\frac{\D #1}{\D #2}}}
\newcommand\Int[2][]      {\ems{\int#1 #2\:}}

\renewcommand{\vec}[1]{\ems{\boldsymbol{#1} }}
\newcommand{\norm}[1] {\ems{\left\lVert #1 \right\rVert }}
\newcommand{\abs}[1]  {\ems{\left\lvert #1 \right\rvert }}
\newcommand{\mean}[1] {\ems{\left< #1 \right>}}
\newcommand{\order}[1]{\ems{\mathcal{O}\left(#1\right)}}

\newcommand\Sgn[1]  {\sgn{\left\{#1\right\}}}
\newcommand\Tr[1]   {\tr{\left[#1\right]}}
\newcommand\Log[1]  {\log{\left\{#1\right\}}}
\newcommand\Exp[1]  {\exp{\left\{#1\right\}}}
\newcommand\Tanh[1] {\tanh{\left\{#1\right\}}}

\newcommand{\deltadist}[1]{\delta\left(#1\right)}
\newcommand{\heaviside}[1]{\Theta\left(#1\right)}

% ~~~~~~~~~~~~~~~~~~~~~~~~~~ QUANTUM MECHANICS ~~~~~~~~~~~~~~~~~~~~~~~~~~ 

\newcommand{\ket}[1]{\ems{\left| #1 \right> }}
\newcommand{\bra}[1]{\ems{\left< #1 \right| }}
\newcommand{\braket}[2]
  {\ems{\bra{#1\vphantom{#2}\,}\left.\vphantom{#1}#2\right> }}
\newcommand{\ketbra}[2]{\ems{\ket{#1\vphantom{#2}}\bra{#2\vphantom{#1}}}}
\newcommand{\braketop}[3]
  {\ems{\bra{#1\vphantom{#2 #3}\,}#2\ket{#3\vphantom{#1 #2}} }}

\newcommand{\comm}[2]{\ems{\left[#1,#2\right] }}
\newcommand{\anticomm}[2]{\ems{\left[ #1 , #2 \right]_+ }}
\newcommand{\BF}{\genfrac{}{}{0pt}{}{B}{F} }                % Boson-Fermion

% ~~~~~~~~~~~~~~~~~~~~~~~~~~ DRAWINGS ~~~~~~~~~~~~~~~~~~~~~~~~~~ 

\newcommand*\circled[1]{
  \tikz[baseline=(char.base)]{
  \node[shape=circle,draw,inner sep=1pt] (char) {#1};
  }
}
\newcommand{\uuline}[1]{\ems{\underline{\underline{#1}} }}
\newcommand{\scontract}[2]{\bcontraction{}{#1}{}{#2}#1#2}   % Simple contraction
\newcommand{\phfrac}[2]{\genfrac{}{}{0pt}{}{#1}{#2} }     

% ~~~~~~~~~~~~~~~~~~~~~~~~~~ FERMION PROPAGATORS ~~~~~~~~~~~~~~~~~~~~~~~~~~ 

% You can use \Slash p- to put a minus in front of p. Last argument is the mass.
% You have to supply the propagator with the sign \fermpropp{p}{q-}{m}.
% Enter indexed impulses with a space: \fermprop{q _2}{m}.
\def\Slash#1#2 {\ems{#2 \slashed{#1} }}
\def\Flip#1#2 {#2 #1 }

\newcommand\fermprop[2]{\ems{
  \frac{\I}{ \Slash #1 - #2 } }
}
\newcommand\fermProp[2]{\ems{
  \frac{\I\left( \Slash #1 + #2\right) }{( \Flip #1 )^2-#2^2 } }
}
\newcommand\fermpropp[3]{\ems{
  \frac{\I}{\Slash #1 \Slash #2 - #3 } }
} 
\newcommand\fermPropp[3]{\ems{
  \frac{\I\left(\Slash #1 \Slash #2 + #3\right) }
  {\left(#1 \Flip #2 \right)^2-#3^2 } }
}

% ~~~~~~~~~~~~~~~~~~~~~~~~~~ SHORTHAND NOTATIONS ~~~~~~~~~~~~~~~~~~~~~~~~~~ 

\newcommand\Rcite[1]{Ref.~\cite{#1}}
\newcommand\etal{\textit{et al. }}

% Spaces
\newcommand\vs[1]{\vspace{#1 em}} 
\newcommand\hs[1]{\hspace{#1 em}} 

% Formatting
\newcommand\mr[1]{\mathrm{#1}} 
\newcommand{\ems}[1]{\ensuremath{#1}}

% Math text
\newcommand{\T}[1]{\text{#1}}
\newcommand{\MT}[1]{\quad\T{#1}\quad}
\newcommand\with {\MT{with}}
\newcommand\no {\notag \\ }
\newcommand\po{\;.}
\newcommand\co{\;,}

% Math
\newcommand{\del}{\partial}
\newcommand{\E}{\ems{\T e}}
\newcommand{\I}{\ems{\T i}}
\newcommand{\D}{\ems{\T d}}
\newcommand{\1}{\mathbbm 1}
\newcommand{\Hs}[1]{\heaviside{#1}}
\newcommand{\dd}[1]{\deltadist{#1}}
\newcommand{\nfrac}[2]{\ems{\nicefrac{#1}{#2}}}
\newcommand\Sp\scalprod

% Quantum Field Theory
\newcommand\ham   {\ems{\mathcal H}}
\newcommand\lag   {\ems{\mathcal L}}
\newcommand\polM  {\ems{\mathcal{\tilde M}}}
\newcommand\unpolM{\ems{\mathcal{M}}}
\newcommand\PS    {\ems{\mathcal P}}
\newcommand\Sl[1] {\ems{\slashed{#1}}}

% Standard model
\newcommand\sw  {\ems{\T s_W}}
\newcommand\cw  {\ems{\T c_W}}
\newcommand\as  {\ems{\alpha_S}}
\newcommand\Mv  {\ems{m_V}}
\newcommand\Mw  {\ems{m_W}}
\newcommand\Mz  {\ems{m_Z}}
\newcommand\Me  {\ems{m_e}}
\newcommand\Mmu {\ems{m_\mu}}  
\newcommand\Mtau{\ems{m_\tau}}
\newcommand\Mu  {\ems{m_u}}
\newcommand\Md  {\ems{m_d}}
\newcommand\Ms  {\ems{m_s}}
\newcommand\Mc  {\ems{m_c}}
\newcommand\Mb  {\ems{m_b}}
\newcommand\Mt  {\ems{m_t}}
\newcommand\Mh  {\ems{m_H}}

% Arrows
\newcommand\lrA {\ems{\leftrightarrow}}
\newcommand\LrA {\ems{\Leftrightarrow}}
\newcommand\rA  {\ems{\rightarrow}}
\newcommand\RA  {\ems{\Rightarrow}}
\newcommand\lA  {\ems{\leftarrow }}
\newcommand\LA  {\ems{\Leftarrow }}
\newcommand\up  {\ems{\uparrow}}
\newcommand\down{\ems{\downarrow}}
\newcommand\Up  {\ems{\Uparrow}}
\newcommand\Down{\ems{\Downarrow}}

% Parentheses
\newcommand\Al {\bigl}
\newcommand\Ar {\bigr}
\newcommand\Bl {\Bigl}
\newcommand\Br {\Bigr}
\newcommand\Cl {\biggl}
\newcommand\Cr {\biggr}
\newcommand\Dl {\Biggl}
\newcommand\Dr {\Biggr}

% ~~~~~~~~~~~~~~~~~~~~~~~~~~ ENVIRONMENTS ~~~~~~~~~~~~~~~~~~~~~~~~~~ 

\newcommand{\mathnote}[1]{\ems{\mbox{\smaller[1] $#1$}}}

% ~~~~~~~~~~~~~~~~~~~~~~~~~~ AUTOMATIC FEYNMP CALL ~~~~~~~~~~~~~~~~~~~~~~~~~~ 
% This allows to generate feynman graphs automatically
% Might need option for pdflatex

\makeatletter
\def\endfmffile{%
  \fmfcmd{\p@rcent\space the end.^^J%
          end.^^J%
          endinput;}%
  \if@fmfio
    \immediate\closeout\@outfmf
  \fi
  \ifnum\pdfshellescape=\@ne
    \immediate\write18{cd Feynmp;mpost \thefmffile}%
  \fi}
\makeatother

\endinput
